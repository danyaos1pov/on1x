<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>ON1X VPN</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <script>
    if (!Telegram.WebApp || !Telegram.WebApp.initDataUnsafe || !Telegram.WebApp.initDataUnsafe.user) {
        document.addEventListener('DOMContentLoaded', function() {
            // Заменяем все содержимое body на сообщение об ошибке
            document.body.innerHTML = `
                <div style="
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    justify-content: center;
                    height: 100vh;
                    text-align: center;
                    padding: 20px;
                    color: #fff;
                    background-color: #1a1a1a;
                    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                ">
                    <i class="fas fa-exclamation-triangle" style="font-size: 48px; margin-bottom: 20px; color: #ffc107;"></i>
                    <h2>Ошибка доступа!</h2>
                    <p>Пожалуйста, откройте приложение в Telegram!</p>
                </div>
            `;
        });
        // Останавливаем выполнение основного скрипта Mini App
        throw new Error('Mini App must be opened within Telegram.');
    }
  </script>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

  <style>
    * { margin: 0;
padding: 0; box-sizing: border-box; }

    html, body {
      height: 100vh;
      background-color: #1a1a1a;
-webkit-user-select: none;
      user-select: none;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      max-width: 500px;
      margin: 0 auto;
      overflow: hidden;
}

    body {
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
justify-content: center;
    }

    .pages-container {
      position: absolute;
      top: 0; left: 0;
right: 0; bottom: 0;
      overflow: hidden;
    }

    .page {
      position: absolute;
top: 0; left: 0; right: 0; bottom: 0;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.35s ease;
      pointer-events: none;
      will-change: opacity;
transform: translateZ(0);
      -webkit-backface-visibility: hidden;
      backface-visibility: hidden;
      overflow: hidden;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
}

    .page.active {
      opacity: 1;
      visibility: visible;
      pointer-events: all;
      z-index: 10;
}

    #purchase-page,
    #extend-page {
      padding-bottom: 90px;
}

    #main-page {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
position: relative;
      width: 100%;
      height: 100%;
    }

    .logo-and-title {
position: relative;
top: -72px;
      display: flex;
      flex-direction: column;
      align-items: center;
      z-index: 10;
}

    .logo { 
      width: 80vw; 
      max-width: 150px; 
      height: auto; 
      pointer-events: none;
user-drag: none; 
    }

    .title {
      font-size: 48px;
      font-weight: 900;
      letter-spacing: 1.5px;
margin-top: -8px;
    }
    .title span:first-child { color: #ffffff;
}
    .title span:last-child  { color: #ff3411;
}

    .bottom-card {
      position: absolute;
      bottom: 20px;
      left: 16px;
      right: 16px;
background: rgba(255, 255, 255, 0.11);
      backdrop-filter: blur(24px);
      -webkit-backdrop-filter: blur(24px);
      border-radius: 18px;
      padding: 20px;
      z-index: 15;
border: 1px solid rgba(255, 255, 255, 0.18);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.37);
      max-width: 460px;
      margin: 0 auto;
}

    .btn-row { 
      display: flex; 
      gap: 12px; 
      margin-bottom: 12px;
}
    .btn-row:last-child { margin-bottom: 0; }
    .btn-full { width: 100%;
}

    .btn {
      height: 48px;
      border-radius: 14px;
      font-size: 16px;
      font-weight: 600;
display: flex;
      align-items: center;
      justify-content: center;
      gap: 9px;
      transition: all 0.25s ease;
-webkit-tap-highlight-color: transparent;
}

    .btn-orange { background: #fb7f1b; color: #ffffff;
}
    .btn-secondary { 
      background: rgba(255,255,255,0.09); 
      color: #ffffffdd; 
      border: 1px solid rgba(255,255,255,0.2);
}
    .btn:active { transform: scale(0.96); }

    .material-icons-round { font-size: 22px !important;
}

    .page-header {
      text-align: center;
      margin-bottom: 30px;
      padding-top: 40px;
}

    .page-header .logo-mini { 
      width: 60px; 
      margin-bottom: 12px;
}
    .page-title { 
      font-size: 28px; 
      font-weight: 700; 
      color: #ffffff; 
      margin-bottom: 8px;
}
    .page-subtitle { 
      font-size: 15px; 
      color: #ffffffaa; 
      max-width: 320px;
margin: 0 auto; 
      line-height: 1.5; 
    }

    #profile-page {
      display: flex;
      flex-direction: column;
align-items: center;
      padding: 20px 20px 40px;
      color: #ffffff;
    }

    .profile-header {
      display: flex;
align-items: center;
      gap: 14px;
      width: 100%;
      max-width: 350px;
      background: rgba(50, 50, 50, 0.75);
      backdrop-filter: blur(20px);
      border-radius: 16px;
      padding: 14px 18px;
border: 1px solid rgba(255,255,255,0.12);
      margin-bottom: 20px;
    }

    .profile-avatar {
      width: 64px;
height: 64px;
      border-radius: 50%;
      object-fit: cover;
      border: 2.5px solid #fb7f1b;
      box-shadow: 0 4px 14px rgba(251,127,27,0.35);
}

    .profile-info { 
      flex: 1;
}
    .profile-name { 
      font-size: 18px; 
      font-weight: 600; 
      color: #ffffff;
}
    .profile-id { 
      font-size: 13.5px; 
      color: #ffffff99; 
      margin-top: 2px;
}

    .profile-buttons {
      width: 100%;
      max-width: 350px;
      display: flex;
      flex-direction: column;
gap: 10px;
    }

    .profile-btn {
      height: 50px;
      background: rgba(255,255,255,0.08);
border: 1px solid rgba(255,255,255,0.18);
      border-radius: 14px;
      color: #ffffff;
      font-size: 16px;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 12px;
padding: 0 18px;
      transition: all 0.25s ease;
    }

    .profile-btn:active {
      transform: scale(0.97);
background: rgba(251,127,27,0.15);
      border-color: #fb7f1b;
    }

    .channel-block {
      width: 100%;
      max-width: 350px;
margin-top: 30px;
      text-align: center;
      padding: 20px;
      background: rgba(50, 50, 50, 0.75);
      backdrop-filter: blur(20px);
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.12);
}

    .channel-title {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 8px;
      color: #ffffff;
}

    .channel-desc {
      font-size: 14px;
      color: #ffffffaa;
      margin-bottom: 16px;
      line-height: 1.5;
}

    .telegram-btn {
      height: 48px;
      background: #229ed9;
      color: #ffffff !important;
      font-size: 16px;
font-weight: 600;
      border-radius: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      transition: all 0.25s ease;
box-shadow: 0 4px 12px rgba(34, 158, 217, 0.3);
    }

    .telegram-btn:active {
      transform: scale(0.96);
background: #1e8cc7;
    }

    #invite-page {
      display: flex;
      flex-direction: column;
      align-items: center;
padding: 20px 16px 40px;
      color: #ffffff;
    }

    .invite-content {
      width: 100%;
max-width: 350px;
      text-align: center;
    }

    .invite-text {
      font-size: 16px;
      line-height: 1.6;
color: #ffffffdd;
      margin-bottom: 30px;
    }

    .invite-btn {
      height: 52px;
      background: #fb7f1b;
color: #ffffff;
      font-size: 17px;
      font-weight: 600;
      border-radius: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
}

    .invite-btn:active {
      transform: scale(0.96);
}

    .sub-page {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px 16px;
}

    .tariff-list {
      width: 100%;
      max-width: 350px;
      display: flex;
      flex-direction: column;
gap: 10px;
      margin-bottom: 20px;
    }

    .tariff-item {
      background: rgba(50, 50, 50, 0.75);
backdrop-filter: blur(20px);
      border-radius: 12px;
      padding: 11px 18px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: #ffffff;
      font-weight: 500;
      cursor: pointer;
transition: all 0.2s ease;
      border: 2px solid transparent;
    }

    .tariff-item.selected {
      border: 2px solid #fb7f1b;
}

    .action-btn {
      width: calc(100% - 32px);
      max-width: 350px;
      height: 48px;
border-radius: 14px;
      font-size: 18px;
      font-weight: 600;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 9px;
      background: #fb7f1b;
      color: #ffffff;
      position: fixed;
bottom: 16px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 100;
    }

    .action-btn:active { 
      transform: translateX(-50%) scale(0.96);
}

    #app-page {
      display: flex;
      flex-direction: column;
      padding: 20px 16px 40px;
color: #ffffff;
    }

    .device-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 14px;
margin: 0 auto 30px; /* Центрируем */
      width: 100%;
/* Заполняет ширину родительского контейнера (который уже имеет padding 16px) */
      max-width: 380px;
/* Удален конфликтный padding: 0 16px; */
    }

    .device-card {
      background: rgba(255,255,255,0.08);
backdrop-filter: blur(20px);
      border: 2px solid transparent;
      border-radius: 16px;
      padding: 20px 10px;
      text-align: center;
      color: #ffffff;
      font-size: 14px;
      font-weight: 500;
transition: all 0.25s ease;
      cursor: pointer;
    }

    .device-card i {
      font-size: 2.4em;
color: #fb7f1b;
      margin-bottom: 10px;
    }

    .device-card:active {
      transform: scale(0.94);
      background: rgba(251,127,27,0.2);
}

    .device-card.selected {
      border: 2px solid #fb7f1b !important;
      background: rgba(255,255,255,0.08) !important;
}

    #instruction-container {
      width: 100%;
/* Заполняет ширину родительского контейнера */
      max-width: 380px;
      margin: 10px auto 0;
/* Центрируем, используя auto */
    }

    .instruction-box {
      background: rgba(50,50,50,0.75);
backdrop-filter: blur(20px);
      border: 1px solid rgba(255,255,255,0.12);
    border-radius: 16px;
      padding: 20px;
      color: #ffffff;
      line-height: 1.6;
      font-size: 15px;
}

    .instruction-box h4 {
      font-size: 19px;
      margin-bottom: 18px;
      text-align: center;
      display: flex;
align-items: center;
      justify-content: center;
      gap: 10px;
      color: #fb7f1b;
    }

    .instruction-box ol { 
      padding-left: 22px;
margin: 14px 0; 
    }
    .instruction-box li { 
      margin: 8px 0;
}

    .install-btn {
      margin-top: 20px;
      width: 100%;
      height: 50px;
      background: #fb7f1b;
color: #ffffff;
      font-size: 17px;
      font-weight: 600;
      border-radius: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      cursor: pointer;
}

    .install-btn:active { 
      transform: scale(0.96);
}

    .placeholder {
      text-align: center;
      color: #ffffff88;
      font-size: 17px;
      padding: 60px 20px;
}

    .placeholder i { 
      font-size: 48px; 
      opacity: 0.3; 
      margin-bottom: 16px;
display: block; 
    }

    body::before {
      content: '';
      position: fixed;
      right: 0;
bottom: 0;
      width: 500vw; 
      height: 500vh;
      background: radial-gradient(circle at 100% 100%,
                rgba(251,127,27,0.85) 0%,
                rgba(251,127,27,0.50) 15%,
                rgba(251,127,27,0.20) 35%,
                transparent 65%);
transform: translate(45%, 45%);
      pointer-events: none;
      z-index: 1;
    }
  </style>
</head>
<body oncontextmenu="return false;">

  <div class="pages-container">

    <div id="main-page" class="page active">
      <div class="logo-and-title">
        <img src="https://psv4.userapi.com/s/v1/d2/7YOAE0rRsbmFbpCBTt8P93kEQlqivjZneY04wFEo4Ghv6Rc8hSxYvaBPdnRYFYj2oBAaB0xjlwRyjVKId3cUDbdvT9c4W_2XP1DgMiWaRD0P8SoYNUfvdNVrB7dtgXxTisfOCXLquFpJ/vfyvfyvfyvfy.png" alt="ON1X VPN" class="logo">
        <div class="title"><span>ON1X</span><span> VPN</span></div>
      </div>

      <div class="bottom-card">
        <div class="btn-row">
          <div class="btn btn-orange" style="flex: 1;"
onclick="openPage('extend-page'); vibrate('heavy')">
            <span class="material-icons-round">autorenew</span> Продлить
          </div>
          <div class="btn btn-orange" style="flex: 1;"
onclick="openPage('purchase-page'); vibrate('heavy')">
            <span class="material-icons-round">shopping_cart</span> Купить
          </div>
        </div>

        <div class="btn-row">
          <div class="btn btn-secondary btn-full" onclick="openPage('app-page'); vibrate('medium')">
            <span class="material-icons-round">downloading</span> Установить приложение
          </div>
        </div>

        <div class="btn-row">
 
          <div class="btn btn-secondary" style="flex: 1;"
onclick="goToLinkDirect('https://t.me/on1xVPN_support')">
            <span class="material-icons-round">support_agent</span> Поддержка
          </div>
          <div class="btn btn-secondary" style="flex: 1;"
onclick="openPage('profile-page'); vibrate('heavy')">
            <span class="material-icons-round">person</span> Профиль
          </div>
        </div>
      </div>
    </div>

    <div id="profile-page" class="page">
      <div class="page-header">
        <img src="https://psv4.userapi.com/s/v1/d2/7YOAE0rRsbmFbpCBTt8P93kEQlqivjZneY04wFEo4Ghv6Rc8hSxYvaBPdnRYFYj2oBAaB0xjlwRyjVKId3cUDbdvT9c4W_2XP1DgMiWaRD0P8SoYNUfvdNVrB7dtgXxTisfOCXLquFpJ/vfyvfyvfyvfy.png" alt="ON1X VPN" class="logo-mini">
        <div class="page-title">Профиль</div>
      </div>

      <div class="profile-header">
        <img id="user-avatar" 
    src="" alt="Аватар" class="profile-avatar">
        <div class="profile-info">
          <div id="user-name" class="profile-name">Загрузка...</div>
          <div id="user-id" class="profile-id">ID: —</div>
        </div>
      </div>

      <div class="profile-buttons">
        <div class="profile-btn" onclick="goToLinkDirect('https://t.me/on1xVPN_bot?start=f_5331349')">
          <span class="material-icons-round">card_membership</span> Моя подписка
        </div>
        
<div class="profile-btn" onclick="goToLinkDirect('https://t.me/on1xVPN_bot?start=f_5372173')">
  
           <span class="material-icons-round">account_balance_wallet</span> Управление кошельком
        </div>
        <div class="profile-btn" onclick="openPage('invite-page');
vibrate('heavy')">
          <span class="material-icons-round">group_add</span> Пригласить друзей
        </div>
      </div>

      <div class="channel-block">
        <div class="channel-title">Наш Telegram канал</div>
        <div class="channel-desc">Все самые актуальные новости и розыгрыши в нашем канале</div>
        <div class="telegram-btn" onclick="goToLinkDirect('https://t.me/ON1Xvpn')">
          <i class="fab fa-telegram-plane"></i> Подписаться на канал
        </div>
     
      </div>
    </div>

    <div id="invite-page" class="page">
      <div class="page-header">
        <img src="https://psv4.userapi.com/s/v1/d2/7YOAE0rRsbmFbpCBTt8P93kEQlqivjZneY04wFEo4Ghv6Rc8hSxYvaBPdnRYFYj2oBAaB0xjlwRyjVKId3cUDbdvT9c4W_2XP1DgMiWaRD0P8SoYNUfvdNVrB7dtgXxTisfOCXLquFpJ/vfyvfyvfyvfy.png" alt="ON1X VPN" class="logo-mini">
        <div class="page-title">Пригласить друзей</div>
      </div>

      <div class="invite-content">
        <div class="invite-text">
          Приводи друзей и получай бонусы!
Просто отправь ссылку, и после того, как друг купит или продлит подписку, ты получишь 15% от суммы оплаты
        </div>
        <div class="invite-btn" onclick="goToLinkDirect('https://t.me/on1xVPN_bot?start=f_3099252')">
          <span class="material-icons-round">share</span> Пригласить друзей
        </div>
      </div>
    </div>

    <div id="app-page" class="page">
      <div class="page-header">
        <img src="https://psv4.userapi.com/s/v1/d2/7YOAE0rRsbmFbpCBTt8P93kEQlqivjZneY04wFEo4Ghv6Rc8hSxYvaBPdnRYFYj2oBAaB0xjlwRyjVKId3cUDbdvT9c4W_2XP1DgMiWaRD0P8SoYNUfvdNVrB7dtgXxTisfOCXLquFpJ/vfyvfyvfyvfy.png" alt="ON1X VPN" class="logo-mini">
        <div 
    class="page-title">Установка приложения</div>
        <div class="page-subtitle">Выберите ваше устройство и следуйте простой инструкции</div>
      </div>

      <div class="device-grid">
        <div class="device-card" data-device="iphone" onclick="showInstallInstruction('iphone')">
          <i class="fab fa-apple"></i>
          <div>iPhone</div>
        </div>
        <div class="device-card" data-device="android" onclick="showInstallInstruction('android')">
          <i class="fab fa-android"></i>
   
          <div>Android</div>
        </div>
        <div class="device-card" data-device="windows" onclick="showInstallInstruction('windows')">
          <i class="fab fa-windows"></i>
          <div>Windows</div>
        </div>
        <div class="device-card" data-device="macos" onclick="showInstallInstruction('macos')">
          <i class="fab fa-apple"></i>
          <div>Mac OS</div>
   
         </div>
      
        <div class="device-card" data-device="linux" onclick="showInstallInstruction('linux')">
          <i class="fab fa-linux"></i>
          <div>Linux</div>
        </div>
        <div class="device-card" data-device="androidtv" onclick="showInstallInstruction('androidtv')">
          <i class="fas fa-tv"></i>
          <div>Android TV</div>
        </div>
      
</div>

      <div id="instruction-container">
        <div class="placeholder">
 
          <i class="fas fa-mobile-alt"></i>
          <div>Выберите ваше устройство</div>
        </div>
      </div>
    </div>

    <div id="purchase-page" class="page sub-page">
      <div class="page-header">
        <img src="https://psv4.userapi.com/s/v1/d2/7YOAE0rRsbmFbpCBTt8P93kEQlqivjZneY04wFEo4Ghv6Rc8hSxYvaBPdnRYFYj2oBAaB0xjlwRyjVKId3cUDbdvT9c4W_2XP1DgMiWaRD0P8SoYNUfvdNVrB7dtgXxTisfOCXLquFpJ/vfyvfyvfyvfy.png" alt="ON1X VPN" class="logo-mini">
        <div class="page-title">Покупка подписки</div>
     
    <div class="page-subtitle">Вы приобретаете новую подписку</div>
      </div>

     
      <div class="tariff-list">
        <div class="tariff-item selected" data-days="30" onclick="selectTariff(this)">
          <span class="tariff-period">30 дней</span>
          <span class="tariff-price">100 руб</span>
        </div>
        <div class="tariff-item" data-days="60" onclick="selectTariff(this)">
          <span class="tariff-period">60 дней</span>
        
   <span class="tariff-price">200 руб</span>
        </div>
        <div class="tariff-item" data-days="90" 
    onclick="selectTariff(this)">
          <span class="tariff-period">90 дней</span>
          <span class="tariff-price">300 руб</span>
        </div>
        <div class="tariff-item" data-days="180" onclick="selectTariff(this)">
          <span class="tariff-period">180 дней</span>
          <span class="tariff-price">600 руб</span>
      
    </div>
      </div>

      <div class="action-btn" onclick="processPayment('purchase')">
        <span class="material-icons-round">shopping_cart</span> Купить 
    подписку
      </div>
    </div>

    <div id="extend-page" class="page sub-page">
      <div class="page-header">
        <img src="https://psv4.userapi.com/s/v1/d2/7YOAE0rRsbmFbpCBTt8P93kEQlqivjZneY04wFEo4Ghv6Rc8hSxYvaBPdnRYFYj2oBAaB0xjlwRyjVKId3cUDbdvT9c4W_2XP1DgMiWaRD0P8SoYNUfvdNVrB7dtgXxTisfOCXLquFpJ/vfyvfyvfyvfy.png" alt="ON1X VPN" class="logo-mini">
        <div class="page-title">Продление подписки</div>
        <div class="page-subtitle">Вы продлеваете существующую подписку</div>
      </div>

     
  <div class="tariff-list">
        <div class="tariff-item selected" data-days="30" onclick="selectTariff(this)">
          <span class="tariff-period">30 дней</span>
     
          <span class="tariff-price">100 руб</span>
        </div>
        <div class="tariff-item" data-days="60" onclick="selectTariff(this)">
          <span class="tariff-period">60 дней</span>
          <span class="tariff-price">200 руб</span>
        </div>
      
    <div class="tariff-item" data-days="90" onclick="selectTariff(this)">
          <span class="tariff-period">90 дней</span>
          <span class="tariff-price">300 руб</span>
       
      </div>
        <div class="tariff-item" data-days="180" onclick="selectTariff(this)">
          <span class="tariff-period">180 дней</span>
          <span class="tariff-price">600 руб</span>
        </div>
      </div>

      <div class="action-btn" onclick="processPayment('extend')">
 
        <span class="material-icons-round">autorenew</span> Продлить подписку
      </div>
    </div>

  </div>

  <script>
    Telegram.WebApp.ready();
Telegram.WebApp.expand();
    Telegram.WebApp.setBackgroundColor('#1a1a1a');
    Telegram.WebApp.setHeaderColor('#1a1a1a');
    Telegram.WebApp.disableVerticalSwipes();

    const user = Telegram.WebApp.initDataUnsafe.user || {};
if (user.id) {
      document.getElementById('user-avatar').src = user.photo_url || 'https://via.placeholder.com/64/333333/ffffff?text=:)';
      const fullName = [user.first_name, user.last_name].filter(Boolean).join(' ') ||
user.username || 'Пользователь';
      document.getElementById('user-name').textContent = fullName;
      document.getElementById('user-id').textContent = `ID: ${user.id}`;
}

    function vibrate(type) {
      type === 'heavy' ? Telegram.WebApp.HapticFeedback.impactOccurred('heavy') : Telegram.WebApp.HapticFeedback.impactOccurred('medium');
}

    function openPage(pageId) {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById(pageId).classList.add('active');
      Telegram.WebApp.BackButton.show();
if (pageId === 'app-page') {
        const ua = navigator.userAgent.toLowerCase();
        let device = 'android';
if (/iphone|ipad|ipod/.test(ua)) device = 'iphone';
        else if (/macintosh|mac os x/.test(ua)) device = 'macos';
        else if (/windows/.test(ua)) device = 'windows';
else if (/linux/.test(ua) && !/android/.test(ua)) device = 'linux';
        else if (/android.*(tv|smarttv|smart-tv)/i.test(ua) || /crkey/.test(ua)) device = 'androidtv';

        showInstallInstruction(device);
}
    }

    function selectTariff(el) {
      vibrate('medium');
      el.closest('.tariff-list').querySelectorAll('.tariff-item').forEach(i => i.classList.remove('selected'));
el.classList.add('selected');
    }

    function processPayment(type) {
      vibrate('heavy');
      const selected = document.querySelector('.page.active .tariff-item.selected');
if (!selected) return;
      const days = selected.getAttribute('data-days');
      const links = {
        purchase: { '30': 'https://t.me/on1xVPN_bot?start=c_2089758', '60': 'https://t.me/on1xVPN_bot?start=c_2089793', '90': 'https://t.me/on1xVPN_bot?start=c_2300579', '180': 'https://t.me/on1xVPN_bot?start=c_2300580' },
        extend:   { '30': 'https://t.me/on1xVPN_bot?start=c_2173534', '60': 'https://t.me/on1xVPN_bot?start=c_2173536', '90': 'https://t.me/on1xVPN_bot?start=c_2231867', '180': 'https://t.me/on1xVPN_bot?start=c_2231869' }
      };
const url = links[type][days];
      if (url) {
        window.location.href = url;
setTimeout(() => Telegram.WebApp.close(), 300);
      }
    }

    function goToLinkDirect(url) {
      vibrate('medium');
window.location.href = url;
      setTimeout(() => Telegram.WebApp.close(), 300);
    }

    function openAppStore(url) {
      vibrate('medium');
Telegram.WebApp.openLink(url);
    }

    const instructions = {
      iphone: `
        <div class="instruction-box">
          <h4><i class="fab fa-apple"></i> iPhone / iPad</h4>
          <ol>
            <li>Скопируйте ключ (ссылку);</li>
            <li>Установите приложение;</li>
            <li>В правом верхнем углу нажмите «+»;</li>
       
      <li>Выберите «Вставить из буфера обмена»;</li>
            <li>Подключитесь к VPN.</li>
          </ol>
          <div class="install-btn" onclick="openAppStore('https://apps.apple.com/ru/app/happ-proxy-utility-plus/id6746188973')">
            <i class="fas fa-download"></i> Установить
          </div>
        </div>`,

      android: `
        <div class="instruction-box">
      
      <h4><i class="fab fa-android"></i> Android</h4>
          <ol>
            <li>Скопируйте ключ (ссылку);</li>
            <li>Установите приложение;</li>
            <li>В правом верхнем углу нажмите «+»;</li>
            <li>Выберите «Вставить из буфера обмена»;</li>
            <li>Подключитесь к VPN.</li>
         
  </ol>
          <div class="install-btn" onclick="openAppStore('https://play.google.com/store/apps/details?id=com.happproxy')">
            <i class="fas fa-download"></i> Установить
          </div>
        </div>`,

      windows: `
        <div class="instruction-box">
          <h4><i class="fab fa-windows"></i> Windows</h4>
          <ol>
            <li>Скопируйте ключ (ссылку);</li>
 
            <li>Установите приложение;</li>
            <li>Внизу нажмите «Из буфера»;</li>
            <li>Подключитесь к VPN.</li>
          </ol>
          <div class="install-btn" onclick="openAppStore('https://github.com/Happ-proxy/happ-desktop/releases/latest/download/setup-Happ.x64.exe')">
            <i class="fas fa-download"></i> Установить
          </div>
        </div>`,

    
    macos: `
        <div class="instruction-box">
          <h4><i class="fab fa-apple"></i> Mac OS</h4>
          <ol>
            <li>Скопируйте ключ (ссылку);</li>
            <li>Установите приложение;</li>
            <li>В правом верхнем углу нажимайте «+»;</li>
            <li>Выберите «Вставить из буфера обмена»;</li>
    
         <li>Подключитесь к VPN.</li>
          </ol>
          <div class="install-btn" onclick="openAppStore('https://apps.apple.com/ru/app/happ-proxy-utility-plus/id6746188973')">
            <i class="fas fa-download"></i> Установить
          </div>
        </div>`,

      linux: `
        <div class="instruction-box">
          <h4><i class="fab fa-linux"></i> Linux</h4>
      
      <ol>
            <li>Скопируйте ключ (ссылку);</li>
            <li>Установите приложение;</li>
            <li>Внизу нажмите «Из буфера»;</li>
            <li>Подключитесь к VPN.</li>
          </ol>
          <div class="install-btn" onclick="openAppStore('https://github.com/Happ-proxy/happ-desktop/releases/')">
            <i class="fas fa-download"></i> Установить
   
        </div>
        </div>`,

      androidtv: `
        <div class="instruction-box">
          <h4><i class="fas fa-tv"></i> Android TV</h4>
          <ol>
            <li>Установите приложение Happ из Google Play;</li>
            <li>Откройте приложение;</li>
            <li>На экране появится 
QR-код, 
            который необходимо отсканировать;</li>
            <li>В открывшемся браузере сайт, необходимо вставить ключ (ссылку);</li>
            <li>Подключитесь к VPN.</li>
          </ol>
        </div>`
    };
    function showInstallInstruction(device) {
      vibrate('medium');
      document.getElementById('instruction-container').innerHTML = instructions[device] || '<div class="placeholder"><i class="fas fa-mobile-alt"></i><div>Инструкция скоро появится</div></div>';
document.querySelectorAll('.device-card').forEach(c => c.classList.remove('selected'));
      document.querySelector(`.device-card[data-device="${device}"]`).classList.add('selected');
    }

    Telegram.WebApp.BackButton.onClick(() => {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById('main-page').classList.add('active');
      Telegram.WebApp.BackButton.hide();
    });
Telegram.WebApp.BackButton.hide();
  </script>
</body>
</html>
