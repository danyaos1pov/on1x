<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ON1X VPN MiniApp</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <!-- TELEGRAM WEB APP SCRIPT -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
    /* === Глобальные стили и переменные === */
    :root {
        --primary-color: #007bff;
        --secondary-color: #28a745;
        --bg-dark: #0d1117;
        --card-bg: #161b22;
        --text-color: #e6edf3;
        --accent-red: #dc3545;
        --gold-color: #ffd700;
        --personal-color: var(--text-color);
        --family-color: var(--secondary-color);
        --premium-color: var(--gold-color);
        --toggle-active-bg: #37475a;
    }
    * { 
        box-sizing: border-box; 
        margin: 0; 
        padding: 0;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';
    }
    body { 
        background: var(--bg-dark); 
        color: var(--text-color); 
        text-align: center; 
        min-height: 100vh; 
        padding-bottom: 50px;
    }
    a { 
        text-decoration: none;
        color: inherit;
    }

    /* === МОДАЛЬНОЕ ОКНО === */
    #modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        backdrop-filter: blur(5px);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 10002;
        opacity: 0;
        transition: opacity 0.3s ease;
    }
    #modal-overlay.visible {
        display: flex;
        opacity: 1;
    }
    #modal-popup {
        background: var(--card-bg);
        padding: 25px;
        border-radius: 20px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        width: 90%;
        max-width: 380px;
        text-align: center;
        transform: scale(0.9);
        transition: transform 0.3s cubic-bezier(0.3, 0.7, 0.4, 1.2);
    }
    #modal-overlay.visible #modal-popup {
        transform: scale(1);
    }
    #modal-popup i {
        font-size: 48px;
        color: var(--primary-color);
        margin-bottom: 15px;
    }
    #modal-title {
        font-size: 1.5em;
        font-weight: 700;
        margin-bottom: 10px;
        color: var(--text-color);
    }
    #modal-message {
        font-size: 1em;
        color: #b0b8c2;
        line-height: 1.6;
        margin-bottom: 25px;
    }
    #modal-close-button {
        background: var(--primary-color);
        color: white;
        border: none;
        border-radius: 10px;
        padding: 12px 0;
        width: 100%;
        font-size: 1em;
        font-weight: 600;
        cursor: pointer;
        transition: background 0.2s;
    }
    #modal-close-button:hover,
    #modal-close-button:active {
        background: #0056b3;
    }

    /* === SPLASH SCREEN === */
    #splash-screen {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: var(--bg-dark);
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        z-index: 1000;
        opacity: 1; 
        transition: opacity 0.7s ease-out; 
    }
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
    .spin {
        animation: spin 1s linear infinite;
    }
    .pulse-container { 
        position: relative;
        width: 120px; 
        height: 120px; 
        margin: 30px auto 10px; 
    }
    #splash-screen .pulse-container {
        margin: 0;
    }
    .pulse-container img { 
        position: absolute; 
        top:0; 
        left:0; 
        width:100%;
        height:100%; 
        border-radius:50%; 
        z-index:10; 
        border:4px solid var(--primary-color); 
        object-fit: cover;
    }
    .pulse-circle {
        position: absolute; 
        top:50%; 
        left:50%; 
        width:120px; 
        height:120px;
        border-radius:50%;
        border: 2px solid rgba(0,123,255,0.5); 
        transform: translate(-50%,-50%) scale(0);
        animation: pulse 2.5s infinite cubic-bezier(0.25, 0.46, 0.45, 0.94); 
    }
    .pulse-circle:nth-child(2) { animation-delay:0.5s; }
    .pulse-circle:nth-child(3) { animation-delay:1s; }
    @keyframes pulse {
        0% { transform: translate(-50%,-50%) scale(0.8); opacity:1; }
        100% { transform: translate(-50%,-50%) scale(1.5); opacity:0; }
    }

    /* === СТРАНИЦЫ === */
    .page {
        position: absolute; 
        top: 0;
        left: 50%;
        width: 100%;
        max-width: 600px; 
        padding: 60px 15px 20px 15px;
        transition: transform 0.4s cubic-bezier(0.2, 0.8, 0.4, 1), 
                    opacity 0.4s cubic-bezier(0.2, 0.8, 0.4, 1);
        will-change: transform, opacity;
        display: none; 
        z-index: 10;
        transform: translate(-50%, 0) scale(1);
        opacity: 1;
    }
    .page.enter-forward {
        transform: translate(-50%, 0) scale(0.9);
        opacity: 0;
        display: block; 
        z-index: 20;
    }
    .page.exit-forward {
        transform: translate(-50%, 0) scale(0.95);
        opacity: 0;
        display: block;
        z-index: 10;
    }
    .page.enter-backward {
        transform: translate(-50%, 0) scale(0.95);
        opacity: 0;
        display: block;
        z-index: 10;
    }
    .page.exit-backward {
        transform: translate(-50%, 0) scale(1.1);
        opacity: 0;
        display: block;
        z-index: 20;
    }
    .page.active {
        transform: translate(-50%, 0) scale(1);
        opacity: 1;
        display: block;
        z-index: 15;
    }

    h1 { 
        font-size: 2.2em; 
        margin-bottom: 5px; 
        color: var(--primary-color);
    }
    h2 { 
        font-size: 1.8em; 
        margin: 0 0 20px 0; 
        border-bottom: 2px solid rgba(255,255,255,0.1); 
        padding-bottom: 10px;
    }
    h3,h4 { 
        margin:15px 0; 
    }
    p { 
        margin:10px 0; 
        line-height:1.6; 
        color: #b0b8c2;
    }

    /* === КАРТОЧКИ === */
    .subscription-status-card {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px;
        margin: 20px auto 10px auto; 
        max-width: 500px;
        background: var(--card-bg);
        border-radius: 15px;
        cursor: pointer;
        transition: transform 0.2s, box-shadow 0.2s, border-color 0.2s;
        box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        border: 1px solid rgba(255,255,255,0.05);
    }
    .subscription-status-card:hover,
    .subscription-status-card:active { 
        transform: none; 
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.6); 
        border-color: var(--primary-color);
    }
    .subscription-status-card .status-icon {
        font-size: 28px;
        color: var(--primary-color);
        min-width: 40px;
        text-align: left;
    }
    .subscription-status-card .status-info {
        flex-grow: 1;
        text-align: center; 
        margin: 0 10px;
    }
    .subscription-status-card .status-title {
        margin: 0;
        font-weight: 700;
        font-size: 1.1em;
        color: var(--text-color);
    }
    .subscription-status-card .status-subtitle {
        margin: 0;
        font-size: 0.75em; 
        color: #b0b8c2;
    }
    .subscription-status-card .status-arrow {
        font-size: 1.2em;
        color: #b0b8c2;
    }

    .menu-grid { 
        display:grid; 
        grid-template-columns: repeat(3, 1fr); 
        gap: 10px;
        max-width:500px;
        margin:10px auto 20px auto; 
    }
    .menu-card { 
        background: var(--card-bg);
        padding: 15px 10px; 
        border-radius:15px; 
        display:flex; 
        flex-direction:column; 
        justify-content:center;
        align-items:center; 
        cursor:pointer;
        transition: transform 0.2s, box-shadow 0.2s, border-color 0.2s; 
        font-weight:600; 
        color: var(--text-color);
        box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        border: 1px solid rgba(255,255,255,0.05);
        min-height: 80px;
        font-size: 0.85em;
        position: relative;
    }
    .menu-card:hover,
    .menu-card:active { 
        transform: none; 
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.6); 
        border-color: var(--primary-color);
    }
    .menu-card.disabled {
        opacity: 0.6;
        cursor: pointer;
    }
    .development-badge {
        position: absolute;
        top: -5px; 
        right: -5px; 
        background: #6c757d;
        color: white;
        font-size: 0.7em;
        font-weight: 700;
        padding: 3px 6px;
        border-radius: 5px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
        transform: rotate(5deg);
        line-height: 1; 
        z-index: 10;
    }
    .menu-card i { 
        font-size: 24px; 
        margin-bottom: 5px;
        color: var(--primary-color);
    }

    .button { 
        display:block; 
        width:100%; 
        max-width:300px;
        margin:20px auto; 
        padding:12px 0;
        border-radius: 8px;
        background: var(--primary-color);
        color: white; 
        border: none;
        box-shadow: 0 2px 5px rgba(0,0,0,0.4);
        font-weight:700;
        transition: all 0.2s ease; 
        cursor: pointer;
        text-align: center;
    }
    .button:hover,
    .button:active { 
        transform: none; 
        background: #0056b3;
        box-shadow: 0 2px 5px rgba(0,0,0,0.4); 
    }
    .button.disabled {
        background: #343a40 !important;
        color: #b0b8c2 !important;
        border-color: transparent !important;
        cursor: not-allowed;
        box-shadow: none !important;
        transform: none !important;
        opacity: 0.7;
    }

    .channel-promo {
        margin: 30px auto 10px;
        padding: 15px;
        background: var(--card-bg);
        border-radius: 15px;
        max-width: 500px; 
        box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        border: 1px solid rgba(255,255,255,0.1);
    }
    .channel-promo p {
        margin: 5px 0 15px;
        color: #b0b8c2;
        font-size: 0.95em;
    }

    .back-button {
        position: fixed;
        top: 15px;
        left: 15px; 
        background: var(--card-bg); 
        color: var(--text-color); 
        padding: 8px 15px;
        border-radius: 12px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        font-size: 1em;
        font-weight: 600;
        cursor: pointer;
        display: flex;
        align-items: center;
        transition: 0.3s;
        z-index: 100;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.4);
    }
    .back-button:hover,
    .back-button:active { 
        color: var(--text-color); 
        background: #1f262f;
        border-color: var(--primary-color);
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.4); 
        transform: none; 
    }

    .tariff-toggle-inside {
        display: flex;
        justify-content: center;
        gap: 5px; 
        margin: 0 auto 15px auto;
        padding-bottom: 10px;
        border-bottom: 1px solid rgba(255,255,255,0.1); 
    }
    .tariff-toggle-inside .toggle-button {
        flex-grow: 1;
        padding: 8px 5px;
        border-radius: 8px; 
        background: var(--bg-dark);
        color: var(--text-color);
        font-weight: 600;
        cursor: pointer;
        transition: background 0.2s, color 0.2s, box-shadow 0.2s;
        text-align: center;
        border: 1px solid rgba(255,255,255,0.05);
        font-size: 0.9em;
    }
    .tariff-toggle-inside .toggle-button.active {
        background: var(--primary-color); 
        color: white;
        border-color: var(--primary-color);
        box-shadow: 0 0 8px rgba(0,123,255,0.5);
    }
    .tariff-content.disabled {
        position: relative;
        pointer-events: none;
        opacity: 0.6;
    }
    .tariff-content.disabled::before {
        content: "В РАЗРАБОТКЕ";
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) rotate(-5deg);
        background: rgba(220, 53, 69, 0.9);
        color: white;
        padding: 10px 20px;
        border-radius: 10px;
        font-size: 1.5em;
        font-weight: 800;
        z-index: 50;
        letter-spacing: 1px;
        border: 3px solid white;
        text-shadow: 0 0 5px rgba(0, 0, 0, 0.8);
    }

    .compact-tariff-card {
        background: var(--card-bg); 
        border-radius: 15px;
        padding: 20px;
        margin-bottom: 20px;
        text-align: left;
        box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        border: 1px solid rgba(255,255,255,0.1);
    }
    .unified-tariff-card .tariff-name-title {
        display: none !important;
    }
    .tariff-slogan {
        margin-top: 0;
        margin-bottom: 15px;
        font-size: 0.95em;
        font-weight: 500;
        min-height: 20px;
        transition: color 0.3s;
    }
    .slogan-personal { color: var(--text-color) !important; } 
    .slogan-family { color: var(--family-color) !important; font-weight: 600; } 
    .slogan-premium { color: var(--premium-color) !important; font-weight: 600; } 
    .tariff-features-list-v2 {
        padding: 10px 0;
        margin-bottom: 0;
        border-top: 1px solid rgba(255,255,255,0.1); 
        padding-top: 15px;
        display: flex;
        justify-content: space-around; 
        align-items: flex-start;
        text-align: center; 
        gap: 10px;
    }
    .tariff-features-list-v2 > div {
        display: block;
        flex-basis: 30%; 
        font-size: 0.85em; 
        color: #b0b8c2;
        line-height: 1.3;
    }
    .tariff-features-list-v2 i {
        color: var(--primary-color);
        font-size: 1.6em;
        margin: 0 auto 5px auto;
        display: block;
    }

    .pricing-card-block {
        background: var(--card-bg);
        border-radius: 15px;
        padding: 20px;
        margin-bottom: 20px;
        text-align: left;
        box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        border: 1px solid rgba(255,255,255,0.1);
    }
    .tariff-days-option {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 15px; 
        margin-bottom: 8px;
        background: rgba(0,0,0,0.2);
        border-radius: 10px;
        cursor: pointer;
        transition: background 0.2s, border-color 0.2s;
        border: 1px solid transparent;
    }
    .tariff-days-option:hover,
    .tariff-days-option:active {
        background: rgba(0,0,0,0.3);
        border-color: rgba(0,123,255,0.3);
    }
    .tariff-days-option.active {
        background: var(--primary-color); 
        box-shadow: 0 0 10px rgba(0,123,255,0.5);
        border-color: var(--primary-color);
    }
    .tariff-days-option.active span {
        font-weight: 700;
    }
    .option-price {
        font-weight: 700;
        color: var(--text-color);
    }
    .tariff-buy-button-container {
        text-align: center;
        padding-top: 5px;
    }

    .install-section { 
        position: relative;
        margin-top: 30px;
        padding: 15px; 
        background: #1a202c; 
        border-radius: 15px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.5); 
    }
    .recommended-badge {
        position: absolute;
        top: -10px;
        right: 15px;
        background: var(--primary-color); 
        color: white;
        padding: 5px 10px;
        border-radius: 8px;
        font-size: 0.85em;
        font-weight: 700;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
        z-index: 15;
        border: 1px solid rgba(255, 255, 255, 0.2);
    }
    .faq-card { 
        background: var(--card-bg); 
        border-radius: 10px; 
        margin: 10px 0; 
        max-width: none;
        box-shadow: 0 3px 8px rgba(0,0,0,0.4); 
        overflow: hidden;
        border: 1px solid rgba(255,255,255,0.05); 
    }
    .faq-header { 
        padding: 15px;
        cursor: pointer; 
        font-weight: 600;
        display: flex; 
        justify-content: space-between; 
        align-items: center; 
        background: #1f262f;
        transition: background 0.2s; 
        color: var(--text-color);
    }
    .faq-header:hover,
    .faq-header:active { 
        background: #2a3443;
    }
    .faq-header.active .arrow { 
        transform: rotate(90deg);
    }
    .faq-body { 
        display: none; 
        padding: 15px; 
        text-align: left; 
        background: var(--card-bg);
        border-top: 1px solid #1f262f; 
        color: #b0b8c2;
        transition: max-height 0.3s ease-out, padding 0.3s ease-out;
    }

    .status-section { 
        background: var(--card-bg); 
        border-radius: 15px; 
        padding: 20px;
        margin: 20px auto; 
        max-width: 400px; 
        text-align: left;
    }
    .status-section h3 { 
        text-align: center;
    }
    .status-item { 
        display: flex;
        justify-content: space-between; 
        align-items: center;
        padding: 10px 0; 
        border-bottom: 1px solid #1f262f; 
        font-weight: 500;
    }
    .status-dot.green { 
        color: var(--secondary-color);
    }
    .status-dot.red { 
        color: var(--accent-red); 
    } 

    .support-container {
        display: flex;
        flex-direction: column;
        gap: 20px;
        margin-top: 20px;
    }
    .support-card {
        background: var(--card-bg);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 20px;
        padding: 25px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.4);
        text-align: center;
    }
    .support-card i.card-icon {
        font-size: 40px;
        color: var(--primary-color);
        margin-bottom: 15px;
    }
    .support-card h3 {
        margin-top: 0;
        margin-bottom: 10px;
        font-size: 1.4em;
    }
    </style>
</head>
<body>
<div id="app-container" style="position: relative; min-height: 100vh;">

    <!-- SPLASH -->
    <div id="splash-screen">
        <div class="pulse-container">
            <div class="pulse-circle"></div>
            <div class="pulse-circle"></div>
            <div class="pulse-circle"></div>
            <img class="logo" src="https://sun9-8.userapi.com/s/v1/ig2/YBkIITuiQ13e1vw3WhNGJekU_fMB3jXEeTjqLb-EAnydjnDmqCVu7sATDepkrUUo6UXWQ4x74BtgfBrgdhWUZZlN.jpg?quality=95&as=32x32,48x48,72x72,108x108,160x160,240x240,360x360,480x480,540x540,640x640&from=bu&cs=640x0" alt="ON1X VPN">
        </div>
        <p class="launch-text" style="font-size: 1.2em; font-weight: 600; color: var(--text-color); margin-top: 30px;">Открываем приложение</p>
    </div>

    <!-- HOME -->
    <div id="home" class="page" style="padding-top: 20px;">
        <div class="pulse-container" style="margin: 30px auto 10px; width: 120px; height: 120px;">
            <div class="pulse-circle"></div>
            <div class="pulse-circle"></div>
            <div class="pulse-circle"></div>
            <img class="logo" src="https://sun9-8.userapi.com/s/v1/ig2/YBkIITuiQ13e1vw3WhNGJekU_fMB3jXEeTjqLb-EAnydjnDmqCVu7sATDepkrUUo6UXWQ4x74BtgfBrgdhWUZZlN.jpg?quality=95&as=32x32,48x48,72x72,108x108,160x160,240x240,360x360,480x480,540x540,640x640&from=bu&cs=640x0" alt="ON1X VPN">
        </div>
        <h1><span style="color: var(--text-color);">ON1X</span> VPN</h1>
        
        <div class="subscription-status-card" onclick="showPage('subscription')">
            <div class="status-icon"><i class="fas fa-credit-card"></i></div>
            <div class="status-info">
                <p class="status-title">Подписка ON1X VPN</p>
                <p class="status-subtitle">Покупка, продление и управление подпиской</p>
            </div>
            <div class="status-arrow"><i class="fas fa-chevron-right"></i></div>
        </div>
        
        <div class="menu-grid">
            <div class="menu-card" onclick="showPage('install')"><i class="fas fa-download"></i>Установка</div>
            <div class="menu-card" onclick="showPage('status')"><i class="fas fa-shield-alt"></i>Статус систем</div>
            <div class="menu-card" onclick="showPage('faq')"><i class="fas fa-lightbulb"></i>FAQ</div>
            <div class="menu-card" onclick="showPage('support')"><i class="fas fa-headset"></i>Поддержка</div>
            <div class="menu-card" onclick="openTelegramLink('https://t.me/on1xVPN_bot?start=f_5371698')">
                <i class="fas fa-user-plus"></i>Пригласить друзей
            </div>
        </div>
        
        <div class="channel-promo">
            <p>Следите за новостями, обновлениями и акциями</p>
            <a href="#" onclick="openTelegramLink('https://t.me/ON1Xvpn'); return false;" class="button"><i class="fab fa-telegram-plane"></i> Подписаться канал</a>
            <a href="https://vk.com/on1xvpn" target="_blank" class="button" style="background: #4C75A3; margin-top: 10px;"><i class="fab fa-vk"></i> Подписаться ВКонтакте</a>
        </div>
    </div>

    <!-- SUBSCRIPTION -->
    <div id="subscription" class="page">
        <button class="back-button" onclick="showPage('home', true)"><i class="fas fa-arrow-left"></i> Назад</button>
        <h2>Подписка ON1X VPN</h2>
        <p>Покупайте, продлевайте, а также управляйте своей подпиской</p>
        
        <div class="menu-grid subscription-actions-grid" style="max-width: 500px; margin: 30px auto; grid-template-columns: repeat(3, 1fr);">
            <div class="menu-card" onclick="showPage('buy')"><i class="fas fa-shopping-cart"></i>Купить</div>
            <div class="menu-card" onclick="showPage('renew')"><i class="fas fa-sync-alt"></i>Продлить</div>
            <div class="menu-card" onclick="openTelegramLink('https://t.me/on1xVPN_bot?start=c_2293355')">
                <i class="fas fa-flask"></i>Тест. период
            </div>
            <div class="menu-card" onclick="openTelegramLink('https://t.me/on1xVPN_bot?start=f_5331349')">
                <i class="fas fa-user-circle"></i>Моя подписка
            </div>
            <div class="menu-card" onclick="openTelegramLink('https://t.me/on1xVPN_bot?start=f_5098822')">
                <i class="fas fa-undo-alt"></i>Возврат
            </div>
        </div>
    </div>

    <!-- BUY -->
    <div id="buy" class="page">
        <button class="back-button" onclick="showPage('subscription', true)"><i class="fas fa-arrow-left"></i> Назад</button>
        <h2>Купить подписку</h2>
        
        <div class="new-tariffs-container" id="buy-tariffs-container">
            <div class="tariff-content" data-tariff="personal">
                <div class="compact-tariff-card unified-tariff-card">
                    <h4 style="margin: 0 0 10px 0; font-size: 1.1em; font-weight: 700;">Выберите тариф</h4>
                    <div class="tariff-toggle-inside" data-target="buy">
                        <div class="toggle-button active" data-tariff="personal" onclick="switchBuyTariff('personal')">Личная</div>
                        <div class="toggle-button developing" data-tariff="family" onclick="switchBuyTariff('family')">Семейная</div>
                        <div class="toggle-button developing" data-tariff="premium" onclick="switchBuyTariff('premium')">Премиум</div>
                    </div>
                    <p class="tariff-slogan slogan-personal current-slogan">Идеально подходит для одного пользователя</p>
                    <div class="tariff-features-list-v2">
                        <div><i class="fas fa-user"></i> 3 устройства</div>
                        <div><i class="fas fa-infinity"></i> Безлимитный интернет</div>
                        <div><i class="fas fa-tachometer-alt"></i> Скорость до 25 Гбит/с</div>
                    </div>
                </div>

                <div class="pricing-card-block">
                    <h4 style="text-align: center; margin-top: 0; font-size: 1.1em; font-weight: 700;">Выберите количество дней</h4>
                    <div id="buy-days-personal" data-tariff-name="personal">
                        <div class="tariff-days-option" data-days="30" data-link="https://t.me/on1xVPN_bot?start=c_2089758" onclick="selectBuyDay('personal', this)">
                            <span>30 дней</span>
                            <span class="option-price">100 руб</span>
                        </div>
                        <div class="tariff-days-option" data-days="60" data-link="https://t.me/on1xVPN_bot?start=c_2089793" onclick="selectBuyDay('personal', this)">
                            <span>60 дней</span>
                            <span class="option-price">200 руб</span>
                        </div>
                        <div class="tariff-days-option" data-days="90" data-link="https://t.me/on1xVPN_bot?start=c_2300579" onclick="selectBuyDay('personal', this)">
                            <span>90 дней</span>
                            <span class="option-price">300 руб</span>
                        </div>
                        <div class="tariff-days-option" data-days="180" data-link="https://t.me/on1xVPN_bot?start=c_2300580" onclick="selectBuyDay('personal', this)">
                            <span>180 дней</span>
                            <span class="option-price">600 руб</span>
                        </div>
                    </div>
                    <div class="tariff-buy-button-container">
                        <a href="#" id="buy-button-personal" class="button disabled">Выберите срок</a>
                    </div>
                </div>
            </div>
            <div class="tariff-content disabled" data-tariff="family" style="display: none;"></div>
            <div class="tariff-content disabled" data-tariff="premium" style="display: none;"></div>
        </div>
    </div>

    <!-- RENEW -->
    <div id="renew" class="page">
        <button class="back-button" onclick="showPage('subscription', true)"><i class="fas fa-arrow-left"></i> Назад</button>
        <h2>Продлить подписку</h2>
        <div class="new-tariffs-container" id="renew-tariffs-container">
            <div class="tariff-content" data-tariff="personal">
                <div class="compact-tariff-card unified-tariff-card">
                    <h4 style="margin: 0 0 10px 0; font-size: 1.1em; font-weight: 700;">Выберите тариф</h4>
                    <div class="tariff-toggle-inside" data-target="renew">
                        <div class="toggle-button active" data-tariff="personal" onclick="switchRenewTariff('personal')">Личная</div>
                        <div class="toggle-button developing" data-tariff="family" onclick="switchRenewTariff('family')">Семейная</div>
                        <div class="toggle-button developing" data-tariff="premium" onclick="switchRenewTariff('premium')">Премиум</div>
                    </div>
                    <p class="tariff-slogan slogan-personal current-slogan">Идеально подходит для одного пользователя</p>
                    <div class="tariff-features-list-v2">
                        <div><i class="fas fa-user"></i> 3 устройства</div>
                        <div><i class="fas fa-infinity"></i> Безлимитный интернет</div>
                        <div><i class="fas fa-tachometer-alt"></i> Скорость до 25 Гбит/с</div>
                    </div>
                </div>
                <div class="pricing-card-block">
                    <h4 style="text-align: center; margin-top: 0; font-size: 1.1em; font-weight: 700;">Выберите количество дней</h4>
                    <div id="renew-days-personal" data-tariff-name="personal">
                        <div class="tariff-days-option" data-days="30" data-link="https://t.me/on1xVPN_bot?start=c_2173534" onclick="selectRenewDay('personal', this)">
                            <span>30 дней</span>
                            <span class="option-price">100 руб</span>
                        </div>
                        <div class="tariff-days-option" data-days="60" data-link="https://t.me/on1xVPN_bot?start=c_2173536" onclick="selectRenewDay('personal', this)">
                            <span>60 дней</span>
                            <span class="option-price">200 руб</span>
                        </div>
                        <div class="tariff-days-option" data-days="90" data-link="https://t.me/on1xVPN_bot?start=c_2231867" onclick="selectRenewDay('personal', this)">
                            <span>90 дней</span>
                            <span class="option-price">300 руб</span>
                        </div>
                        <div class="tariff-days-option" data-days="180" data-link="https://t.me/on1xVPN_bot?start=c_2231869" onclick="selectRenewDay('personal', this)">
                            <span>180 дней</span>
                            <span class="option-price">600 руб</span>
                        </div>
                    </div>
                    <div class="tariff-buy-button-container">
                        <a href="#" id="renew-button-personal" class="button disabled">Выберите срок</a>
                    </div>
                </div>
            </div>
            <div class="tariff-content disabled" data-tariff="family" style="display: none;"></div>
            <div class="tariff-content disabled" data-tariff="premium" style="display: none;"></div>
        </div>
    </div>

    <!-- INSTALL, STATUS, FAQ, SUPPORT — без изменений -->
    <!-- (оставлены как в оригинале, без t.me ссылок) -->

</div> 

<div id="modal-overlay">
    <div id="modal-popup">
        <i class="fas fa-tools"></i>
        <h3 id="modal-title"></h3>
        <p id="modal-message"></p>
        <button id="modal-close-button">Понятно</button>
    </div>
</div>

<script>
// === TELEGRAM WEB APP INIT ===
if (window.Telegram && Telegram.WebApp) {
    Telegram.WebApp.ready();
    Telegram.WebApp.disableClosingConfirmation();
}

function openTelegramLink(url) {
    if (window.Telegram && Telegram.WebApp) {
        Telegram.WebApp.openTelegramLink(url);
    } else {
        window.location.href = url;
    }
}

// === MODAL ===
const modalOverlay = document.getElementById('modal-overlay');
const modalTitle = document.getElementById('modal-title');
const modalMessage = document.getElementById('modal-message');
const modalCloseButton = document.getElementById('modal-close-button');

function showModalNotification(title, message) {
    modalTitle.textContent = title;
    modalMessage.textContent = message;
    modalOverlay.classList.add('visible');
}
function hideModalNotification() {
    modalOverlay.classList.remove('visible');
}
modalCloseButton.addEventListener('click', hideModalNotification);
modalOverlay.addEventListener('click', (e) => { if (e.target === modalOverlay) hideModalNotification(); });

// === PAGE NAVIGATION ===
function showPage(id, isBack = false){
    const pages = document.querySelectorAll('.page');
    const nextPage = document.getElementById(id);
    let currentPage = document.querySelector('.page.active');
    const duration = 400;

    if (!nextPage || nextPage.classList.contains('active')) return; 
    
    window.scrollTo(0, 0);

    pages.forEach(p => {
        p.classList.remove('active', 'enter-forward', 'enter-backward', 'exit-forward', 'exit-backward');
        if (p !== currentPage && p !== nextPage) p.style.display = 'none';
    });

    nextPage.style.display = 'block'; 
    nextPage.classList.add(isBack ? 'enter-backward' : 'enter-forward');
    
    if (currentPage) {
        currentPage.style.display = 'block';
        currentPage.classList.add(isBack ? 'exit-backward' : 'exit-forward');
        currentPage.style.zIndex = isBack ? '20' : '10';
        nextPage.style.zIndex = isBack ? '10' : '20';
        
        setTimeout(() => {
            if(currentPage) {
                currentPage.style.display = 'none';
                currentPage.classList.remove('exit-forward', 'exit-backward', 'active');
                currentPage.style.zIndex = '10'; 
            }
        }, duration); 
    }
    
    setTimeout(() => { 
        nextPage.classList.add('active');
        nextPage.classList.remove('enter-forward', 'enter-backward');
        nextPage.style.zIndex = '15'; 
    }, 10);
}

// === BUY / RENEW LOGIC ===
function switchBuyTariff(tariffName) {
    if (tariffName !== 'personal') {
        showModalNotification(`Тариф в разработке`, `Тариф «${tariffName === 'family' ? 'Семейный' : 'Премиум'}» скоро будет доступен.`);
        return;
    }
    document.querySelectorAll('#buy-tariffs-container .tariff-content').forEach(c => c.style.display = 'none');
    const active = document.querySelector(`#buy-tariffs-container .tariff-content[data-tariff="${tariffName}"]`);
    if (active) active.style.display = 'block';
    document.querySelectorAll('#buy-tariffs-container .toggle-button').forEach(b => b.classList.toggle('active', b.dataset.tariff === tariffName));
    document.querySelectorAll(`#buy-days-${tariffName} .tariff-days-option`).forEach(o => o.classList.remove('active'));
    const btn = document.getElementById(`buy-button-${tariffName}`);
    if (btn) { btn.classList.add('disabled'); btn.innerHTML = 'Выберите срок'; btn.onclick = null; }
}

function selectBuyDay(tariffName, el) {
    document.querySelectorAll(`#buy-days-${tariffName} .tariff-days-option`).forEach(o => o.classList.remove('active'));
    el.classList.add('active');
    const btn = document.getElementById(`buy-button-${tariffName}`);
    if (btn) {
        btn.classList.remove('disabled');
        btn.innerHTML = 'Купить';
        btn.onclick = (e) => { e.preventDefault(); openTelegramLink(el.dataset.link); };
    }
}

function switchRenewTariff(tariffName) {
    if (tariffName !== 'personal') {
        showModalNotification(`Тариф в разработке`, `Тариф «${tariffName === 'family' ? 'Семейный' : 'Премиум'}» скоро будет доступен.`);
        return;
    }
    document.querySelectorAll('#renew-tariffs-container .tariff-content').forEach(c => c.style.display = 'none');
    const active = document.querySelector(`#renew-tariffs-container .tariff-content[data-tariff="${tariffName}"]`);
    if (active) active.style.display = 'block';
    document.querySelectorAll('#renew-tariffs-container .toggle-button').forEach(b => b.classList.toggle('active', b.dataset.tariff === tariffName));
    document.querySelectorAll(`#renew-days-${tariffName} .tariff-days-option`).forEach(o => o.classList.remove('active'));
    const btn = document.getElementById(`renew-button-${tariffName}`);
    if (btn) { btn.classList.add('disabled'); btn.innerHTML = 'Выберите срок'; btn.onclick = null; }
}

function selectRenewDay(tariffName, el) {
    document.querySelectorAll(`#renew-days-${tariffName} .tariff-days-option`).forEach(o => o.classList.remove('active'));
    el.classList.add('active');
    const btn = document.getElementById(`renew-button-${tariffName}`);
    if (btn) {
        btn.classList.remove('disabled');
        btn.innerHTML = 'Продлить';
        btn.onclick = (e) => { e.preventDefault(); openTelegramLink(el.dataset.link); };
    }
}

// === INIT ===
document.addEventListener('DOMContentLoaded', () => {
    const splash = document.getElementById('splash-screen');
    setTimeout(() => {
        splash.style.opacity = '0';
        setTimeout(() => {
            splash.style.display = 'none';
            document.getElementById('home').classList.add('active');
        }, 700);
    }, 1500);

    switchBuyTariff('personal');
    switchRenewTariff('personal');
});

// === DISABLE CONTEXT MENU ===
document.addEventListener('contextmenu', e => e.preventDefault());
</script>
</body>
</html>
